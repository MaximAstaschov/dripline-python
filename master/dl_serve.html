
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dripline Service &#8212; Dripline-Python unknown documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/DL3Logo.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="dripline" href="apidoc/modules.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/DL3Logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">Dripline-Python</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=driplineorg&repo=dripline-python&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Dripline Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#use">Use</a></li>
<li class="toctree-l2"><a class="reference internal" href="#authentication">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-file">Configuration File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="apidoc/modules.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contribute</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="getting_started.html" title="previous chapter">Getting Started</a></li>
      <li>Next: <a href="apidoc/modules.html" title="next chapter">dripline</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="dripline-service">
<h1>Dripline Service<a class="headerlink" href="#dripline-service" title="Permalink to this headline">¶</a></h1>
<p>Dripline includes an executable for running a dripline service defined in a YAML configuration file.
The configuration file defines the set of class instances which will make up the service, as well as their initial configurations.
The tool will create those instances and start the main execution loop.</p>
<div class="section" id="use">
<h2>Use<a class="headerlink" href="#use" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">dl-serve</span> <span class="pre">[options]</span> <span class="pre">[keyword</span> <span class="pre">arguments]</span></code></p>
</div></blockquote>
<p>The user provides a configuration file.</p>
<div class="section" id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">h</span><span class="p">,</span><span class="o">--</span><span class="n">help</span>                   <span class="n">Print</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
<span class="o">-</span><span class="n">c</span><span class="p">,</span><span class="o">--</span><span class="n">config</span> <span class="n">TEXT</span><span class="p">:</span><span class="n">FILE</span>       <span class="n">Config</span> <span class="n">file</span> <span class="n">filename</span>
<span class="o">--</span><span class="n">verbosity</span> <span class="n">UINT</span>            <span class="n">Global</span> <span class="n">logger</span> <span class="n">verosity</span>
<span class="o">-</span><span class="n">V</span><span class="p">,</span><span class="o">--</span><span class="n">version</span>                <span class="n">Print</span> <span class="n">the</span> <span class="n">version</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
<span class="o">-</span><span class="n">b</span><span class="p">,</span><span class="o">--</span><span class="n">broker</span> <span class="n">TEXT</span>            <span class="n">Set</span> <span class="n">the</span> <span class="n">dripline</span> <span class="n">broker</span> <span class="n">address</span>
<span class="o">-</span><span class="n">p</span><span class="p">,</span><span class="o">--</span><span class="n">port</span> <span class="n">UINT</span>              <span class="n">Set</span> <span class="n">the</span> <span class="n">port</span> <span class="k">for</span> <span class="n">communication</span> <span class="k">with</span> <span class="n">the</span> <span class="n">dripline</span> <span class="n">broker</span>
<span class="o">--</span><span class="n">auth</span><span class="o">-</span><span class="n">file</span> <span class="n">TEXT</span>            <span class="n">Set</span> <span class="n">the</span> <span class="n">authentication</span> <span class="n">file</span> <span class="n">path</span>
<span class="o">--</span><span class="n">requests</span><span class="o">-</span><span class="n">exchange</span> <span class="n">TEXT</span>    <span class="n">Set</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">requests</span> <span class="n">exchange</span>
<span class="o">--</span><span class="n">alerts</span><span class="o">-</span><span class="n">exchange</span> <span class="n">TEXT</span>      <span class="n">Set</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">alerts</span> <span class="n">exchange</span>
<span class="o">--</span><span class="nb">max</span><span class="o">-</span><span class="n">payload</span> <span class="n">UINT</span>          <span class="n">Set</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">payload</span> <span class="n">size</span> <span class="p">(</span><span class="ow">in</span> <span class="nb">bytes</span><span class="p">)</span>
<span class="o">--</span><span class="n">loop</span><span class="o">-</span><span class="n">timeout</span><span class="o">-</span><span class="n">msdripline</span><span class="o">.</span><span class="n">loop</span><span class="o">-</span><span class="n">timeout</span><span class="o">-</span><span class="n">ms</span> <span class="n">UINT</span>
<span class="o">--</span><span class="n">message</span><span class="o">-</span><span class="n">wait</span><span class="o">-</span><span class="n">msdripline</span><span class="o">.</span><span class="n">message</span><span class="o">-</span><span class="n">wait</span><span class="o">-</span><span class="n">ms</span> <span class="n">UINT</span>
<span class="o">--</span><span class="n">heartbeat</span><span class="o">-</span><span class="n">routing</span><span class="o">-</span><span class="n">key</span> <span class="n">TEXT</span>
                            <span class="n">Set</span> <span class="n">the</span> <span class="n">first</span> <span class="n">token</span> <span class="n">of</span> <span class="n">heartbeat</span> <span class="n">routing</span> <span class="n">keys</span><span class="p">:</span> <span class="p">[</span><span class="n">token</span><span class="p">]</span><span class="o">.</span><span class="p">[</span><span class="n">origin</span><span class="p">]</span>
<span class="o">--</span><span class="n">heartbeat</span><span class="o">-</span><span class="n">interval</span><span class="o">-</span><span class="n">s</span> <span class="n">UINT</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">interval</span> <span class="n">between</span> <span class="n">heartbeats</span> <span class="ow">in</span> <span class="n">s</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>Communication with the RabbitMQ broker requires the broker address and port, and user/password authentication.</p>
<p>See <a class="reference external" href="https://driplineorg.github.io/dripline-cpp/branches/dl3_develop/authentication.html">Authentication in the dripline-cpp docs</a> for information on how to specify the broker and authentication information.</p>
</div>
<div class="section" id="configuration-file">
<h2>Configuration File<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<p>The configuration is used to define what components are part of the service.
These elements all exist within the top-level <code class="docutils literal notranslate"><span class="pre">runtime-config</span></code> node within the configuration file, which is described here.
If not already familiar, you’re encouraged to review the <a class="reference external" href="https://driplineorg.github.io/dripline-cpp/branches/dl3_develop/library.html">dripline-cpp core library documentation</a> for descriptions of roles of the base classes and their relationships.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">runtime-config</span></code> node is built up out of nodes which each describe a class instance.
The details for defining instance nodes is below
The top level of the runtime configuration must be exactly one instance which is either a <code class="docutils literal notranslate"><span class="pre">Service</span></code> or a class derrived from it.
It follows the description below for any instance node, but has an extra reserved keyword (<code class="docutils literal notranslate"><span class="pre">endpoints</span></code>), which contains an array of instance nodes which will be added as children of the <code class="docutils literal notranslate"><span class="pre">Service</span></code> instance, these can be instance of any <code class="docutils literal notranslate"><span class="pre">Endpoint</span></code>-derrived class.</p>
<p>For a more complete example of writing a configuration file and using it, see the <a href="#id1"><span class="problematic" id="id2">`first mesh tutorial in the driplineorg controls guide&lt;https://driplineorg.github.io/controls-guide/develop/guides/first-mesh.html&gt;`_</span></a></p>
<div class="section" id="instance-node-description">
<h3>Instance node description<a class="headerlink" href="#instance-node-description" title="Permalink to this headline">¶</a></h3>
<p>Each instance node defines an object which will be created and configured as part of the service.
There are a number of reserved keywords, which are removed from the node before creation.
The rest of the node is unpacked into the named arguments of the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method of the class when it is created.
The reserved keywords are</p>
<dl class="glossary simple">
<dt id="term-module">module</dt><dd><p>Specifies the name of the class to create an instance of.
The application will search for a class with this name in the following namespaces in order and create the first one it finds:</p>
<ol class="arabic simple">
<li><p>the source file provided in the <code class="docutils literal notranslate"><span class="pre">module_path</span></code>, if provided</p></li>
<li><p>the extensions namespace or any namespaces within the extensions namespace (this is not recursive beyond that level)</p></li>
<li><p>the dripline.implementations namespace</p></li>
<li><p>the dripline.core namespace</p></li>
</ol>
</dd>
<dt id="term-module_path">module_path</dt><dd><p>Path to an extra source file containing class implementation for the module.
If present, this file is searched first and so it will take precidents if the <code class="docutils literal notranslate"><span class="pre">module</span></code> has the same name as a class which is part of dripline-python</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a matter of convention, dripline-python classes all accept extra keyword arguments to their <code class="docutils literal notranslate"><span class="pre">__init__</span></code> functions, usting the <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> argument packing.
These are passed along when the class calls the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> of its base class(es), allowing the complete set of keyword arguments to be provided.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Whenever possible, dripline-python classes provide default values to keyword arguments so that derrived classes are able to be created given the above convention.
All required arguments of the class and its base classes must be passed to the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> of any class (for example, <code class="docutils literal notranslate"><span class="pre">Endpoint</span></code>, which is a base of all available classes, requires the <code class="docutils literal notranslate"><span class="pre">name</span></code> keyword argument, meaning that every instance node must have a name argument).</p>
</div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2020, The Dripline-Python Authors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/dl_serve.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>